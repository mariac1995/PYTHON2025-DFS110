<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Produtos</title>

    <style>
      #produto-form > div {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-bottom: 8px;
        width: 300px;
      }

      #produtos-table {
        width: 100%;
        max-width: 800px;
      }

      #produtos-table,
      #produtos-table th,
      #produtos-table td {
        text-align: center;
        border: 1px solid;
        border-collapse: collapse;
      }
    </style>
  </head>
  <body>
    <h1>Gestão de Produtos</h1>

    <form id="produto-form">
      <div>
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome" />
      </div>

      <div>
        <label for="preco">Preço</label>
        <input type="number" step="0.01" id="preco" name="preco" />
      </div>

      <div>
        <label for="categoria">Categoria</label>
        <select name="categoria" id="categoria">
          <option value="">Sem Categoria</option>
          <option value="Eletronico">Eletrônico</option>
          <option value="Textil">Têxtil</option>
          <option value="Limpeza">Limpeza</option>
        </select>
      </div>

      <button type="submit">Cadastrar</button>
    </form>

    <p id="mensagem"></p>

    <hr />

    <h2>Produtos</h2>

    <table id="produtos-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Preço</th>
          <th>Categoria</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      const pMensagem = document.getElementById("mensagem");
      const produtoForm = document.getElementById("produto-form");
      const produtosTable = document.getElementById("produtos-table");

      function mostrarMensagem(text, type) {
        pMensagem.innerText = text;

        pMensagem.style.fontWeight = "bold";
        pMensagem.style.color = type == "success" ? "green" : "red";
      }

      function adicionarProdutoTabela(produto) {
        const tableData = produtosTable.querySelector("tbody");
        tableData.innerHTML += `
            <tr>
              <td>${produto.nome}</td>
              <td>${produto.preco.toLocaleString("pt-BR", {
                style: "currency",
                currency: "BRL",
              })}</td>
              <td>${produto.categoria}</td>
            </tr>
        `;
      }

      produtoForm.addEventListener("submit", (event) => {
        event.preventDefault();

        const produto = {
          nome: produtoForm.nome.value.trim(),
          preco: produtoForm.preco.value.trim(),
          categoria: produtoForm.categoria.value,
        };

        if (produto.nome === "") {
          mostrarMensagem("O campo nome é obrigatório.", "error");
          return;
        }

        if (produto.preco === "") {
          mostrarMensagem("O campo preço é obrigatório.", "error");
          return;
        }

        produto.preco = Number(produto.preco);

        if (produto.preco <= 0) {
          mostrarMensagem("O preço deve ser maior que zero.", "error");
          return;
        }

        produto.categoria = produto.categoria === "" ? null : produto.categoria;

        mostrarMensagem("Produto cadastrado com sucesso.", "success");
        adicionarProdutoTabela(produto);

        produtoForm.reset();
      });
    </script>
  </body>
</html>
